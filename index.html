<html>
<head>
<title>Custom Version Generator for Luma3DS</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</head>      
<body>
    <div id="content" class="container">
      <div class="row">
        <div class="col-xs-12">
          <h1>Custom Version Generator for Luma3DS <small>by Gilded</small></h1>
        </div>
      </div>
	<div class="row">
        <div class="col-xs-12 form-horizontal">
          <div class="form-group">
            <div class="col-xs-12">
              <div class="input-group">
                <span class="input-group-addon">sdmc:/luma/</span>
                <input id="textbox" maxlength="19" placeholder="Ver. 11.1.0-34U" type="text" class="form-control" />
                <span class="input-group-btn">
                	<a download="customversions.txt" id="downloadlink" class="btn btn-default">Download</a>
                </span>
              </div>
            </div>
          </div>
		</div>
        <div class="col-xs-12">
            <p><em id="length">Characters Left: 19</em>
              <script type="text/javascript">
              var left=19;
                $('#textbox').on('keyup',function(){
                  if($('#textbox').val().length>=0)
                    $('#length').html("Characters Left: "+(left-$('#textbox').val().length));
                  else
                    $('#length').html('You surpass the limit');
                });
              </script></p>
        </div>
        <div class="col-xs-12">
            <div class="checkbox">
              <label><input type="checkbox" value="" id="version">Keep the Version/Region</label>
              <script type="text/javascript">
                string = textbox.value;
                stringorg = string;
                $('#version').click(function() {
                  string = textbox.value;
                  stringmod = string.substring(0, 4);        
                  if(document.getElementById('version').checked) {
                    textbox.value=stringmod;
                    left=4;
                    $("#textbox").attr('maxlength','4');
                    $('#length').html("Characters Left: "+(left-$('#textbox').val().length));
                  } else {
                    left=19;
                    $("#textbox").attr('maxlength','19');
                    $('#length').html("Characters Left: "+(left-$('#textbox').val().length));
                  }
                });
              </script>
            </div>
        </div>
	</div>	
	<div class="row">
        <div class="col-xs-12">
          	<h3>Create your own customized customversion.txt for Luma3DS!</h3>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12">
          <h2>Notes</h2>
          <ul>
            <li>The string can be 19 characters max.</li>
            <li>Make sure you have the latest Luma3DS Release and the option flagged.</li>
            <li>If the option "Keep the Version/Region" it's checked the string will be reduced to 4 characters (this is for the sake of making a clean string).</li>
            <li>You can uncheck it and apply it by yourself if you want to customize it. The stock Version/Region string from Nintendo is <code>Ver. %d.%d.%d-%d%ls</code>.</li>
          </ul>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12">
          <h2>Resources</h2>
          <ul>
            <li>#3dshacks on Rizon</li>
            <li><a href="https://www.reddit.com/r/3dshacks">/r/3dshacks</a></li>
            <li><a href="http://github.com/AuroraWright/Luma3DS">Luma3DS</a></li>
            <li><a href="http://astronautlevel2.github.io/Luma3DS/">Binaries</a></li>
          </ul>
        </div>
      </div>
    <footer class="footer">
      <div class="col-xs-12">
      <p class="small">Original Design by Eric Chu</p>
      </div>
    </footer>
    </div>    
<script>
(function () {
var textFile = null,
  makeTextFile = function (text) {
    var data = new Blob([text], {type: 'text/plain'});
    if (textFile !== null) {
      window.URL.revokeObjectURL(textFile);
    }
    textFile = window.URL.createObjectURL(data);
    return textFile;
  };
  var create = document.getElementById('downloadlink'),
    textbox = document.getElementById('textbox');
  create.addEventListener('click', function () {
    var link = document.getElementById('downloadlink');
    if(document.getElementById('version').checked) {
      link.href = makeTextFile(textbox.value + " %d.%d.%d-%d%ls");
    } else{
      link.href = makeTextFile(textbox.value);
    }
    link.style.display = 'block';
  }, false);
})();
</script>
</body>
</html>